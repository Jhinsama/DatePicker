"use strict";!function(x,k,r){function g(t,e){if(!t.className)return t.className=e;D(t,e)||(t.className+=" "+e)}function D(t,e){return!!t.className&&new RegExp("(^|\\s+)"+e+"((?=\\s)|$)").test(t.className)}function n(t){return k.createElement(t)}function l(t,e){if(1==t.nodeType)t.style.display=e;else for(var s=0;s<t.length;s++)t[s].style.display=e}function m(t,e){if(1==t.nodeType)t.className=e;else for(var s=0;s<t.length;s++)t[s].className=e}function h(t,e,s,i){i?t.removeEventListener?t.removeEventListener(e,s):t.detachEvent?(t.detachEvent("on"+e,t[e+s]),t[e+s]=null,t["e"+e+s]=null):t["on"+e]=null:t.addEventListener?t.addEventListener(e,s):t.attachEvent?(t["e"+e+s]=s,t[e+s]=function(){t["e"+e+s](x.event)},t.attachEvent("on"+e,t[e+s])):t["on"+e]=s}function Y(t,e){if(t.getElementsByClassName)return t.getElementsByClassName(e);for(var s=[],i=new RegExp("(^|\\s+)"+e+"((?=\\s)|$)"),a=t.getElementsByTagName("*"),n=0;n<a.length;n++)i.test(a[n].className)&&s.push(a[n]);return s}function M(t,e){if(e.nodeType&&1==e.nodeType)for(;t&&t!=e;)t=t.parentElement;else{var s=e.split("");if("."==s[0]){e=e.replace(".","");for(var i=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t&&(!t.className||!i.test(t.className));)t=t.parentElement}else if("#"==s[0])for(e=e.replace("#","");t&&t.id!=e;)t=t.parentElement;else for(;t&&t.nodeName.toLowerCase()!=e;)t=t.parentElement}return t}function d(t){var e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight};for(t=t.offsetParent;null!=t;)e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent;return e}function t(t){return console.time("初始化时间选择器"),this.monthEn=["Jan","Fed","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.month=["一","二","三","四","五","六","七","八","九","十","十一","十二"],this.week=["日","一","二","三","四","五","六"],this.day=[31,[28,29],31,30,31,30,31,31,30,31,30,31],this.type=3,this.isFF=/.*Firefox.*/.test(navigator.userAgent),this.doms={},this.datas={},this.state={},this.cache={},this.touch={},this.check={},this.maxId=(new Date).getTime(),this.init(t),console.timeEnd("初始化时间选择器"),this.api}x.DatePicker||(t.prototype={init:function(t){this.createPicker(),this.format=this.initFormat(t),this.initInputs(),this.api={set:this.set.bind(this),join:"/",show:this.showPicker.bind(this),value:"",refresh:this.refresh.bind(this),callback:function(t){console.log(JSON.stringify(t))}}},set:function(t,e){this.isInput(t)&&(e instanceof Object||(this.datas[t.bindId]?e={offset:d(t)}:(h(t,"focus",this.showPicker.bind(this,t)),e={offset:d(t),max:null,min:null,format:this.format,range:null,bind:null}),this.setInput(t,e)))},createPicker:function(){var t=n("style");t.type="text/css",t.innerHTML="",k.getElementsByTagName("head")[0].appendChild(t);var e=this.doms.box=n("div");e.className="-date-picker";e.innerHTML="            <div id='-date-picker-point'>                <div class='-rotate45'></div>            </div>            <div class='-date-picker-main'>                <div id='-date-picker-main'></div>            </div>",k.body.appendChild(e),this.reSize(),this.getElement()},createSelectBox:function(){var t=n("div");t.className="-date-picker-select",t.innerHTML="            <div class='-d-p-select-head'>                <div id='-d-p-select-head'></div>            </div>            <div class='-d-p-select-year-month'>                <div id='-d-p-select-main'></div>            </div>            <div class='-d-p-select-foot'>                <div>                    <button id='-date-picker-btn-back'>返回</button>                </div>            </div>",this.doms.main.appendChild(t),this.getElement(2)},createDayBox:function(){var t=n("div"),e=n("div"),s=n("div");m(t,"-date-picker-head"),m(e,"-date-picker-day"),m(s,"-date-picker-btn"),t.innerHTML="            <div>                <div class='-date-picker-ym'>                    <button id='-date-picker-ym'></button>                    <span class='-dpcymt -rotate45'></span>                </div>            </div>",s.innerHTML="            <div>                <div id='-date-picker-btn-tday'><button>今&emsp;天</button></div>                <div id='-date-picker-btn-ystday'><button>昨&emsp;天</button></div>                <div id='-date-picker-btn-lsweek'><button>上一周</button></div>                <div id='-date-picker-btn-lsmonth'><button>上一月</button></div>                <div id='-date-picker-btn-hour'><button>00</button></div>                <div id='-date-picker-btn-minute'><button>00</button></div>                <div id='-date-picker-btn-second'><button>00</button></div>                <div id='-date-picker-btn-confirm'><button>确定</button></div>            </div>";for(var i="            <div>                <div class='-date-picker-title'>",a=0;a<this.week.length;a++)i+="<button class=''>",i+=this.week[a],i+="</button>";i+="                </div>                <div id='-date-picker-prev'>                    <div class='-rotate45'></div>                </div>                <div class='-date-picker-box'>                    <div id='-date-picker-year' data-month='0' style='transition:transform 300ms;'>                        <div class='-prev-year'>上一年</div>";for(a=1;a<13;a++)i+="<div class='-date-picker-month'><div class='-bg-month'>",i+=a,i+="</div></div>";i+="                        <div class='-next-year'>下一年</div>                    </div>                </div>                <div id='-date-picker-next'>                    <div class='-rotate45'></div>                </div>            </div>",e.innerHTML=i,this.doms.main.appendChild(t),this.doms.main.appendChild(e),this.doms.main.appendChild(s),this.getElement(1)},createMonthBox:function(){this.state.step[2]||this.createSelectBox();var t=n("div"),e=n("div"),s="";t.id="-d-p-select-year-touch",m(e,"-d-p-s-month-box"),t.innerHTML="            <div class='-d-p-select-left'></div>            <div class='-d-p-select-box'>                <div id='-d-p-select-year'></div>            </div>            <div class='-d-p-select-right'></div>";for(var i=0;i<12;i++)s+="<div class='-d-p-s-month' data-month='",s+=i+1,s+="'><div>",s+=this.month[i],s+="月<div class='-d-p-s-m-en'>",s+=this.monthEn[i],s+="</div></div></div>";e.innerHTML=s,this.doms.selectHead.appendChild(t),this.doms.selectMain.appendChild(e),this.getElement(3)},createYearBox:function(){this.state.step[2]||this.createSelectBox();var t=n("button"),e=n("div");m(e,"-d-p-s-year-box"),e.innerHTML="            <div id='-d-p-s-year-prev'>                <div class='-rotate45'></div>            </div>            <div class='-d-p-s-y-box'>                <div id='-d-p-s-y-box'></div>            </div>            <div id='-d-p-s-year-next'>                <div class='-rotate45'></div>            </div>",t.id="-d-p-select-year-range",this.doms.selectHead.appendChild(t),this.doms.selectMain.appendChild(e),this.getElement(4)},getElement:function(t){t=t||0;var e=this.doms,s=e.box,i=k.getElementById.bind(k);switch(t){case 0:e.point=i("-date-picker-point"),e.main=i("-date-picker-main");break;case 1:e.btn=i("-date-picker-ym"),e.btnBox=e.btn.parentElement,e.year=i("-date-picker-year"),e.dayBox=e.year.parentElement,e.months=Y(s,"-date-picker-month"),e.prevMonth=i("-date-picker-prev"),e.nextMonth=i("-date-picker-next"),e.today=i("-date-picker-btn-tday"),e.yesterday=i("-date-picker-btn-ystday"),e.lastweek=i("-date-picker-btn-lsweek"),e.lastmonth=i("-date-picker-btn-lsmonth"),e.hour=i("-date-picker-btn-hour"),e.hourBtn=e.hour.children[0],e.minute=i("-date-picker-btn-minute"),e.minuteBtn=e.minute.children[0],e.second=i("-date-picker-btn-second"),e.secondBtn=e.second.children[0],e.confirm=i("-date-picker-btn-confirm");break;case 2:e.selectHead=i("-d-p-select-head"),e.selectMain=i("-d-p-select-main"),e.backBtn=i("-date-picker-btn-back");break;case 3:e.touchBox=i("-d-p-select-year"),e.yearDrag=i("-d-p-select-year-touch"),e.monthBtns=Y(s,"-d-p-s-month"),e.monthBox=e.monthBtns[0].parentElement;break;case 4:e.yearRnage=i("-d-p-select-year-range"),e.prevYear=i("-d-p-s-year-prev"),e.nextYear=i("-d-p-s-year-next"),e.yearBox=i("-d-p-s-y-box")}this.state.step||(this.state.step={}),this.state.step[t]||this.initEvent(t),this.state.step[t]=!0},initEvent:function(t){var e=h,s=this.doms;switch(t){case 0:e(x,"resize",this.reSize.bind(this)),e(s.box,"touchmove",this.disabledEvent);break;case 1:var i=s.dayBox;e(s.btnBox,"click",this.clickEv.bind(this,s.btnBox)),e(s.prevMonth,"click",this.prevMonth.bind(this)),e(s.nextMonth,"click",this.nextMonth.bind(this)),e(s.today,"click",this.clickEv.bind(this,s.today)),e(s.yesterday,"click",this.clickEv.bind(this,s.yesterday)),e(s.lastweek,"click",this.clickEv.bind(this,s.lastweek)),e(s.lastmonth,"click",this.clickEv.bind(this,s.lastmonth)),e(s.hour,"click",this.clickEv.bind(this,s.hour)),e(s.minute,"click",this.clickEv.bind(this,s.minute)),e(s.second,"click",this.clickEv.bind(this,s.second)),e(s.confirm,"click",this.clickEv.bind(this,s.confirm)),e(i,"click",this.clickEv.bind(this,i)),e(i,"touchstart",this.touchS.bind(this,i)),e(i,"touchmove",this.touchM.bind(this,i)),e(i,"touchend",this.touchE.bind(this,i)),e(i,"touchcancel",this.touchE.bind(this,i)),this.isFF?e(i,"DOMMouseScroll",this.mouseW.bind(this,i)):e(i,"mousewheel",this.mouseW.bind(this,i));break;case 2:e(s.backBtn,"click",this.back.bind(this));break;case 3:var a=s.yearDrag;e(s.monthBox,"click",this.clickEv.bind(this,s.monthBox)),e(a,"click",this.clickEv.bind(this,a)),e(a,"touchstart",this.touchS.bind(this,a)),e(a,"touchmove",this.touchM.bind(this,a)),e(a,"touchend",this.touchE.bind(this,a)),e(a,"touchcancel",this.touchE.bind(this,a)),this.isFF?e(a,"DOMMouseScroll",this.mouseW.bind(this,a)):e(a,"mousewheel",this.mouseW.bind(this,a));break;case 4:var n=s.yearBox;e(s.yearBox,"click",this.clickEv.bind(this,s.yearBox)),e(s.prevYear,"click",this.clickEv.bind(this,s.prevYear)),e(s.nextYear,"click",this.clickEv.bind(this,s.nextYear)),e(n,"touchstart",this.touchS.bind(this,n)),e(n,"touchmove",this.touchM.bind(this,n)),e(n,"touchend",this.touchE.bind(this,n)),e(n,"touchcancel",this.touchE.bind(this,n)),this.isFF?e(n,"DOMMouseScroll",this.mouseW.bind(this,n)):e(n,"mousewheel",this.mouseW.bind(this,n))}},reSize:function(){var t=this.doms.box;t.style.visibility="hidden",l(t,"block"),this.state.boxWidth=t.offsetWidth,this.state.boxHeight=t.offsetHeight,l(t,"none"),t.style.visibility="visible"},refresh:function(){for(var t in this.datas)this.set(this.datas[t].el)},disabledEvent:function(t){return(t=t||x.event).preventDefault&&t.preventDefault(),t.stopPropagation&&event.stopPropagation(),!1},blurPicker:function(t){var e=!0;if((t=t||x.event).target!=x){var s=M(t.target,".-date-picker"),i=M(t.target,"input");if(s)e=!1;else if(i)for(var a in this.datas)if(this.datas[a].el===i){e=!1;break}}e&&(this.hidePicker(),this.endSelect())},hidePicker:function(){l(this.doms.box,"none"),this.state.cY=0,this.state.date=r,this.state.focus=r,this.maxDate=r,this.minDate=r},initInputs:function(){for(var t={},e=Y(k,"datepicker"),s=0;s<e.length;s++){var i=e[s];if(this.isInput(i))h(i,"focus",this.showPicker.bind(this,i)),(r={min:i.getAttribute("min"),max:i.getAttribute("max"),bind:i.getAttribute("bind"),range:i.getAttribute("range"),format:this.initFormat(i.getAttribute("format")),offset:d(i)}).min&&"now"!=r.min&&"string"==typeof r.min&&!r.min.match(/[YMD]\d+(?!\d)/g)&&(r.min=this.judgeDateStr(r.min,r.format)),r.max&&"now"!=r.max&&"string"==typeof r.max&&!r.max.match(/[YMD]\d+(?!\d)/g)&&(r.max=this.judgeDateStr(r.max,r.format)),r.range&&r.bind&&("start"==r.range||"end"==r.range)?(t[r.bind]||(t[r.bind]={}),t[r.bind][r.range]||(t[r.bind][r.range]={el:i,op:r})):(r.range&&(r.range="self"),this.setInput(i,r))}for(var a in t){var n=t[a];if(n.start&&n.end){var r;(r={min:n.end.op.min||n.start.op.min,max:n.end.op.max||n.start.op.max,format:n.end.op.format||n.start.op.format}).bindElId=n.end.el.bindId,r.range="start",r.offset=n.start.offset,this.setInput(n.start.el,r),r.bindElId=n.start.el.bindId,r.range="end",r.offset=n.end.offset,this.setInput(n.end.el,r)}else{var o=n.start||n.end;o.op.range="self",this.setInput(o.el,o.op)}}},isInput:function(t){return!(!t||!t.nodeType||1!=t.nodeType||"input"!=t.nodeName.toLowerCase())},setInput:function(t,e){t.bindId||(t.bindId=++this.maxId);var s=t.bindId;for(var i in this.datas[s]||(this.datas[s]={el:t}),e)this.datas[s][i]=e[i];t.type="text"},initFormat:function(t){var e=this.format||{str:"YYYY-MM-DD"};if("string"!=typeof t)return e;if(/\d/.test(t))return e;var s={str:t};return/YYYY(?!Y)/.test(t)&&(s.Y=!0),/MM(?!M)/.test(t)&&(s.M=!0),/DD(?!D)/.test(t)&&(s.D=!0),/hh(?!h)/.test(t)&&(s.h=!0),/mm(?!m)/.test(t)&&(s.m=!0),/ss(?!s)/.test(t)&&(s.s=!0),s},showPicker:function(t){if(t&&t.bindId){t.blur(),this.check[t.bindId]||(this.check[t.bindId]={}),this.endSelect(),this.state.focus=this.datas[t.bindId],this.state.date=this.getDate(),this.judgeRange();var e=this.initPicker();l(this.doms.box,"block"),x.scrollTo(0,e)}},endSelect:function(){},initPicker:function(){var t=this.state,e=t.date,s=t.focus,i=s.format||this.format,a=this.doms,n=a.box,r=a.point;if(i.D||i.h||i.m||i.s)if(m(n,"-date-picker"),this.setCurrent(e.Y,e.M),i.h||i.m||i.s)l([a.hour,a.minute,a.second,a.confirm],"inline-block"),l([a.today,a.yesterday,a.lastweek,a.lastmonth],"none"),a.hourBtn.innerText=e.hs,a.minuteBtn.innerText=e.ms,a.secondBtn.innerText=e.ss,this.type=4;else{l([a.hour,a.minute,a.second,a.confirm],"none"),l([a.today,a.yesterday,a.lastweek,a.lastmonth],"inline-block");var o=e.d-this.minDate.d;m([a.today,a.yesterday,a.lastweek,a.lastmonth],"un"),0<o&&(m(a.today,""),0<(o-=36e5*e.h+6e4*e.m+1e3*e.s+e.d.getMilliseconds())&&(m(a.yesterday,""),s.range&&(0<o-864e5*e.w&&m(a.lastweek,""),0<o-864e5*e.D&&m(a.lastmonth,"")))),this.type=3}else i.M?(this.showMonthBox(),this.type=2):(this.showYearBox(),this.type=1);var h=s.offset.top,d=s.offset.height,c=s.offset.left;s.offset.width;return n.style.top=h+d+"px",c+t.boxWidth>x.innerWidth?(n.style.left=x.innerWidth-t.boxWidth+"px",r.style.left=c-x.innerWidth+t.boxWidth+15+"px"):(n.style.left=c+"px",r.style.left="10%"),h-(x.innerHeight-t.boxHeight-d)},getDate:function(t){var e=t?new Date(t):new Date,s={d:e,Y:e.getFullYear(),M:e.getMonth()+1,D:e.getDate(),w:e.getDay()||7,h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};return s.Ms=this.toFiexd(s.M),s.Ds=this.toFiexd(s.D),s.hs=this.toFiexd(s.h),s.ms=this.toFiexd(s.m),s.ss=this.toFiexd(s.s),s},toFiexd:function(t){return 9<t?t:"0"+t},judgeRange:function(){var t=this.state.focus;t.min?"string"==typeof t.min?this.minDate=this.judgeDateStr(t.min):this.minDate=t.min:this.minDate=this.judgeDateStr("Y5"),t.max?"string"==typeof t.max?this.maxDate=this.judgeDateStr(t.max,1):this.maxDate=t.max:this.maxDate=this.judgeDateStr("Y5",1)},judgeDateStr:function(t,e){if("now"==t)return this.getDate();var s=t.match(/[YMD]\d+(?!\d)/g);if(s){for(var i={},a=0;a<s.length;a++)i[s[a].match(/[YMD]/)[0]]=~~s[a].match(/\d+/)[0];if(!e)for(var n in i)i[n]=-i[n];return this.judgeDate(i)}return!!(i=this.initDate(t,e))&&this.getDate(i.str)},judgeDate:function(t,e){return e=e||this.getDate(),t.D&&e.d.setDate(e.D+t.D),t.M&&e.d.setMonth(e.M+t.M-1),t.Y&&e.d.setFullYear(e.Y+t.Y),this.getDate(e.d.getTime())},judgeDay:function(t,e){return 13==e&&(t++,e=1),0==e&&(t--,e=12),2!=e?this.day[e-1]:t%4?this.day[1][0]:this.day[1][1]},initDate:function(t,e){for(var s=(e=e||this.format).str.replace(/YYYY(?!Y)/,0).replace(/MM(?!M)/,1).replace(/DD(?!D)/,2).replace(/hh(?!h)/,3).replace(/mm(?!m)/,4).replace(/ss(?!s)/,5).replace(/\D/g," ").split(" "),i=t.replace(/\D/g," ").split(" "),a=[],n=0;n<i.length;n++)s[n]&&(a[s[n]]=i[n]);return a[0]!=r&&a[1]!=r&&a[2]!=r&&(t=a[0]+"/"+a[1]+"/"+a[2],a[3]!=r&&(t+=" ",t+=a[3],a[4]||(a[4]="00"),t+=":",t+=a[4],a[5]||(a[5]="00"),t+=":",t+=a[5]),{arr:a,str:t})},mosaicDateStr:function(t,e){return(e=e||this.format).str.replace(/YYYY(?!Y)/,t.Y).replace(/MM(?!M)/,this.toFiexd(t.M)).replace(/DD(?!D)/,this.toFiexd(t.D)).replace(/hh(?!h)/,this.toFiexd(t.h)).replace(/mm(?!m)/,this.toFiexd(t.m)).replace(/ss(?!s)/,this.toFiexd(t.s))},sortDate:function(t,e,s){var i,a;s=s||this.format;var n=new Date(this.initDate(t,s).str);return new Date(this.initDate(e,s).str)<n?(i=t,a=e):(i=e,a=t),{max:i,min:a}},setBtnMsg:function(t,e){this.doms.btn.innerHTML=t+"年"+this.toFiexd(e)+"月"},setCurrent:function(t,e){this.state.step[1]||this.createDayBox(),this.state.Y=t,this.state.M=e,this.setBtnMsg(t,e),this.showMonth(t,e),this.doms.year.setAttribute("data-month",e-1),this.showMonth(t,e+1),this.showMonth(t,e-1)},showMonth:function(t,e){if(e<1||12<e)return!1;var s,i,a,n=this.doms.months,r=this.state,o=r.focus.el,h=o.bindId,d=(o.bindElId,this.check[h]||{});n[e-1].innerHTML=this.mosaicMonth(t,e),s=Y(n[e-1],"-date-picker-date"),t==r.Y&&e==r.M&&(r.btns=s);for(var c=0;c<42;c++)i=~~s[c].innerText,a=D(s[c],"un"),t!=d.Y||e!=d.M||d.D!=i||a||g(s[c],"active")},mosaicMonth:function(t,e){if(this.cache[t]||(this.cache[t]={}),!this.cache[t][e]){var s="<div class='-bg-month'>"+e+"</div>",i=this.getDate(t+"/"+e).w,a=this.judgeDay(t,e),n=this.judgeDay(t,e-1);return s+=this.mosaicDay(i,n-i),s+=this.mosaicDay(a),i+=a,s+=this.mosaicDay(42-i),this.cache[t][e]=s}return this.cache[t][e]},mosaicDay:function(t,e){this.getDate();var s="";e=e||0;for(var i=0;i<t;i++)s+="<button class='-date-picker-date",(t<28||0<e)&&(s+=" un' data-skip='",s+=0<e?"prev":"next"),s+="'>",i+e<9&&(s+="&ensp;"),s+=i+e+1,s+="</button>";return s},prevMonth:function(){var t=this.state.Y,e=this.state.M;1==e?(t--,e=13,this.setDayBoxCss()):this.setDayBoxCss(0),this.setCurrent(t,e-1)},nextMonth:function(){var t=this.state.Y,e=this.state.M;12==e?(t++,e=0,this.setDayBoxCss()):this.setDayBoxCss(0),this.setCurrent(t,e+1)},setDayBoxCss:function(t){var e=this.doms.year;"number"==typeof t?0==t?e.style.cssText="transition:transform 300ms;":(t=-t,e.style.cssText="-webkit-transform: translateY("+t+"px) translateZ(0);-moz-transform: translateY("+t+"px) translateZ(0);-ms-transform: translateY("+t+"px) translateZ(0);-o-transform: translateY("+t+"px) translateZ(0);transform: translateY("+t+"px) translateZ(0);"):e.style.cssText=""},showMonthBox:function(){this.state.step[3]||this.createMonthBox();for(var t=this.doms,e=this.minDate,s=this.maxDate,i=e.Y-4,a=s.Y+4,n=this.state.cY||this.state.Y||this.getDate().Y,r="",o=i;o<=a;o++)r+="<button class='-d-p-s-y'",(o<e.Y||o>s.Y)&&(r+=" style='color:#999'"),r+=">",r+=o,r+="</button>";t.touchBox.innerHTML=r,this.setMonthBox(n),this.state.cY=n,m(t.box,"-date-picker -month")},setMonthBox:function(t){t=t||0;var e=this.minDate,s=this.maxDate;t=t<e.Y?e.Y:t>s.Y?s.Y:t;var i=this.doms,a=t-e.Y+4,n=i.touchBox;if(i.yearDrag.setAttribute("data-jump",a),a*=-1,n.style.cssText="                transition:left 300ms;                -webkit-transform: translateZ(0);                -moz-transform: translateZ(0);                -ms-transform: translateZ(0);                -o-transform: translateZ(0);                transform: translateZ(0);                left: "+a+"00%;",i.yearDrag.setAttribute("data-year",t),(this.state.cY=t)!=e.Y)if(t!=s.Y)m(i.monthBtns,"-d-p-s-month");else for(r=0;r<12;r++)r+1>s.M?m(i.monthBtns[r],"-d-p-s-month un"):m(i.monthBtns[r],"-d-p-s-month");else for(var r=0;r<12;r++)r+1<e.M?m(i.monthBtns[r],"-d-p-s-month un"):m(i.monthBtns[r],"-d-p-s-month")},showYearBox:function(){this.state.step[4]||this.createYearBox();var t,e,s=this.minDate,i=this.maxDate,a=s.Y-4,n=i.Y+4,r=this.state.cY||this.state.Y||this.getDate().Y,o=this.doms,h=o.yearRnage,d=o.yearBox,c="";h.innerText=s.Y+" - "+i.Y,n+=(t=n-a)<12?12-t:3-(t=(t%=3)||3);for(var l=a;l<n;l++)c+="<button class='-d-p-s-year",l<s.Y||l>i.Y?c+=" un":l==r&&(c+=" in"),c+="' data-year='",c+=l,c+="'>",c+=l,c+="</button>";d.innerHTML=c,e=~~((r-a)/3)-1,this.setYearBox(e,1),this.state.cY=r,m(o.box,"-date-picker -year")},setYearBox:function(t,e){var s,i="";e&&(i+="transition:transform 300ms;",s=this.doms.yearBox.childNodes.length/3-4,t=t<0?0:s<t?s:t),this.doms.yearBox.setAttribute("data-row",t),i+="                -webkit-transform:translateY("+(t*=-25)+"%) translateZ(0);                -moz-transform:translateY("+t+"%) translateZ(0);                -ms-transform:translateY("+t+"%) translateZ(0);                -o-transform:translateY("+t+"%) translateZ(0);                transform:translateY("+t+"%) translateZ(0);",this.doms.yearBox.style.cssText=i},touchS:function(t,e){e=e||x.event;var s=event.touches[0],i=this.doms;switch(t){case i.dayBox:this.touch={sy:s.clientY,my:s.clientY,bh:i.dayBox.offsetHeight};break;case i.yearDrag:this.touch={Y:~~i.yearDrag.getAttribute("data-year"),j:~~i.yearDrag.getAttribute("data-jump"),sx:s.clientX,mx:s.clientX,bw:i.touchBox.offsetWidth};break;case i.yearBox:this.touch={sy:s.clientY,my:s.clientY,ro:~~i.yearBox.getAttribute("data-row"),bh:i.yearBox.offsetHeight/4}}return!1},touchM:function(t,e){e=e||x.event;var s=this.doms;switch(t){case s.dayBox:var i=this.state.M-1,a=e.touches[0].clientY;this.touch.my=a,this.setDayBoxCss(i*this.touch.bh+this.touch.sy-a);break;case s.yearDrag:var n=e.touches[0].clientX;(r=this.touch).mx=n,s.touchBox.style.cssText="left:"+-100*((r.sx-n)/r.bw+r.j)+"%;";break;case s.yearBox:a=e.touches[0].clientY;var r=this.touch;this.touch.my=a,this.setYearBox((r.sy-a)/r.bh+r.ro)}return!1},touchE:function(t,e){e=e||x.event;var s=this.touch,i=this.doms;switch(t){case i.dayBox:if(s.my===s.sy)return!1;var a=s.my-s.sy;Math.abs(a)>=s.bh/4?0<a?this.prevMonth():a<0&&this.nextMonth():this.setDayBoxCss(0);break;case i.yearDrag:if(s.mx===s.sx)return!1;var n=s.Y+(s.sx-s.mx)/s.bw;.5<=n%1&&n++,this.setMonthBox(~~n);break;case i.yearBox:if(s.my===s.sy)return!1;var r=(s.sy-s.my)/s.bh+s.ro;.5<=r%1&&r++,this.setYearBox(~~r,1)}return!1},mouseW:function(t,e){if(this.state.wheel)return!1;this.state.wheel=!0,e=e||x.event,this.disabledEvent(e);var s=this.doms;if(this.isFF)if(0<e.detail)switch(t){case s.dayBox:this.nextMonth();break;case s.yearDrag:this.setMonthBox(1+~~t.getAttribute("data-year"));break;case s.yearBox:this.setYearBox(1+~~t.getAttribute("data-row"),1)}else switch(t){case s.dayBox:this.prevMonth();break;case s.yearDrag:this.setMonthBox(t.getAttribute("data-year")-1);break;case s.yearBox:this.setYearBox(t.getAttribute("data-row")-1,1)}else if(0<e.wheelDelta)switch(t){case s.dayBox:this.prevMonth();break;case s.yearDrag:this.setMonthBox(t.getAttribute("data-year")-1);break;case s.yearBox:this.setYearBox(t.getAttribute("data-row")-1,1)}else switch(t){case s.dayBox:this.nextMonth();break;case s.yearDrag:this.setMonthBox(1+~~t.getAttribute("data-year"));break;case s.yearBox:this.setYearBox(1+~~t.getAttribute("data-row"),1)}return this.state.wheel=!1},clickEv:function(t,e){e=e||x.event,this.disabledEvent(e);var s=this.doms;switch(t){case s.btnBox:this.showMonthBox();break;case s.yearDrag:this.showYearBox();break;case s.today:case s.yesterday:case s.lastweek:case s.lastmonth:case s.hour:case s.minute:case s.second:case s.confirm:this.hidePicker();break;case s.dayBox:if(!(b=M(e.target,".-date-picker-date")))return!1;var i=b.innerText;if(D(b,"un")){var a=b.getAttribute("data-skip");if(a){var n=this.state.M;if(this[a+"Month"](),n!=this.state.M){n=this.state.M-1;for(var r,o=Y(this.doms.months[n],"-date-picker-date"),h=0;h<42;h++)if(!D(o[h],"un")&&o[h].innerText==i){r=o[h];break}r&&function(t,e){if(k.createEventObject){var s=k.createEventObject();return t.fireEvent("on"+e,s)}(s=k.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(s)}(r,"click")}}}else{var d=this.state,c=~~i,l=d.focus,m=l.el.bindId,u=this.check[m];if(u.Y=d.Y,u.M=d.M,u.D=c,g(b,"active"),3==this.type){var v,f=this.mosaicDateStr({Y:u.Y,M:u.M,D:c},l.format);l.el.value=f,l.range?l.el.bindElId:(v={value:f},this.hidePicker()),this.api.value=f,this.callback(v)}}break;case s.prevYear:this.setYearBox(s.yearBox.getAttribute("data-row")-1,1);break;case s.nextYear:this.setYearBox(1+~~s.yearBox.getAttribute("data-row"),1);break;case s.monthBox:if(!(b=M(e.target,".-d-p-s-month"))||"-d-p-s-month un"==b.className)return!1;n=~~b.getAttribute("data-month");var p=this.state.focus;2<this.type?this.setCurrent(this.state.cY,n):p.el.value=this.mosaicDateStr({Y:this.state.cY,M:n},p.format),this.back();break;case s.yearBox:var b;if(!(b=M(e.target,".-d-p-s-year"))||"-d-p-s-year un"==b.className)return!1;var y=~~b.getAttribute("data-year");p=this.state.focus;1<this.type?this.setMonthBox(y):p.el.value=this.mosaicDateStr({Y:y},p.format),this.back()}return!1},back:function(){var t=this.doms.box,e=t.className,s=this.type;switch(e){case"-date-picker -month":2<s?(m(t,"-date-picker"),this.state.cY=0):this.hidePicker();break;case"-date-picker -year":1<s?m(t,"-date-picker -month"):this.hidePicker();break;case"-date-picker":this.hidePicker()}},callback:function(t){this.api.callback instanceof Function&&this.api.callback(t)}},x.DatePicker=t)}(window,document);